<!DOCTYPE html><html lang="en"><head><title>utils/humanize</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="utils/humanize"><meta name="groc-project-path" content="lib/utils/humanize.coffee"><meta name="groc-github-url" content="https://github.com/nevir/groc"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/nevir/groc/blob/master/lib/utils/humanize.coffee">lib/utils/humanize.coffee</a></div></div><div id="document"><div class="segment"><div class="code"><div class="wrapper">module.<span class="built_in">exports</span> = humanize =
  <span class="attribute">joinSentence</span>: <span class="function"><span class="params">(parts, conjunctive=<span class="string">'and'</span>)</span> -&gt;</span>
    <span class="keyword">if</span> parts.length &gt; <span class="number">2</span>
      [parts[<span class="number">0.</span>.-<span class="number">2</span>].join(<span class="string">', '</span>), parts[parts.length - <span class="number">1</span>]].join(<span class="string">", <span class="subst">#{conjunctive}</span> "</span>)
    <span class="keyword">else</span>
      parts.join(<span class="string">" <span class="subst">#{conjunctive}</span> "</span>)

  <span class="attribute">capitalize</span>: <span class="function"><span class="params">(sentence)</span> -&gt;</span>
    <span class="keyword">if</span> sentence.length
      parts = sentence.match <span class="regexp">/^(\s*)([_\*`]*)(\s*)(\w)(.*)$/m</span>
      <span class="string">"<span class="subst">#{parts[<span class="number">1</span>]}</span><span class="subst">#{parts[<span class="number">2</span>]}</span><span class="subst">#{parts[<span class="number">3</span>]}</span><span class="subst">#{parts[<span class="number">4</span>].toUpperCase()}</span><span class="subst">#{parts[<span class="number">5</span>]}</span>"</span>
    <span class="keyword">else</span>
      <span class="string">''</span>

  <span class="attribute">article</span>: <span class="function"><span class="params">(word)</span> -&gt;</span>
    <span class="keyword">if</span> word[<span class="number">0</span>].toLowerCase() <span class="keyword">in</span> [<span class="string">'a'</span>, <span class="string">'e'</span>, <span class="string">'i'</span>, <span class="string">'o'</span>, <span class="string">'u'</span>]
      <span class="string">'an'</span>
    <span class="keyword">else</span>
      <span class="string">'a'</span>

  <span class="attribute">pluralizationRules</span>: [
    { <span class="attribute">regex</span>: <span class="regexp">/([bcdfghjklmnpqrstvwxz])y$/</span>, <span class="attribute">replacement</span>: <span class="string">'$1ies'</span> },
    { <span class="attribute">regex</span>: <span class="regexp">/(ch|sh|x|ss|s)$/</span>, <span class="attribute">replacement</span>: <span class="string">'$1es'</span> },
    { <span class="attribute">regex</span>: <span class="regexp">/$/</span>, <span class="attribute">replacement</span>: <span class="string">'s'</span> }
  ]

  <span class="attribute">pluralize</span>: <span class="function"><span class="params">(word)</span> -&gt;</span>
    <span class="keyword">return</span> word.replace(rule.regex, rule.replacement) <span class="keyword">for</span> rule <span class="keyword">in</span> humanize.pluralizationRules <span class="keyword">when</span> rule.regex.test word

  <span class="attribute">gutterify</span>: <span class="function"><span class="params">(text, gutterWidth)</span> -&gt;</span>
    extantMimimumGutterWidth = <span class="number">0</span>

    <span class="keyword">if</span> text.match(<span class="regexp">/^ +/gm</span>)
      extantMinimumGutterWidth = text.match(<span class="regexp">/^ +/gm</span>).sort()[<span class="number">0</span>].length

    gutter = <span class="string">'            '</span>[<span class="number">0.</span>.gutterWidth].slice(<span class="number">1</span>)
    regex = <span class="regexp">///^\s{<span class="comment">#{extantMinimumGutterWidth}}///gm</span>
    text.replace regex, gutter</span></div></div></div></div></body></html>