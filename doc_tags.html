<!DOCTYPE html><html lang="en"><head><title>doc_tags</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="doc_tags"><meta name="groc-project-path" content="lib/doc_tags.coffee"><meta name="groc-github-url" content="https://github.com/nevir/groc"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/nevir/groc/blob/master/lib/doc_tags.coffee">lib/doc_tags.coffee</a></div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="known-doc-tags">Known Doc Tags</h1></div></div></div><div class="segment"><div class="code"><div class="wrapper">humanize = <span class="built_in">require</span> <span class="string">'./utils/humanize'</span></div></div></div><div class="segment"><div class="comments doc-section doc-section-private"><div class="wrapper"><p><span class='doc-section-header'>Private method collapse_space</span></p>

<p>This function collapses... spaces</p>

<p>Parameters:</p>

<ul>
<li><strong>value must be a String.</strong><br/>(This is the value which will be collapsed. The primary purpose of this method is to allow multiline parameter descriptions, just like this one.)</li>
</ul>

<p><strong>Returns a String</strong></p></div></div><div class="code"><div class="wrapper"><span class="function"><span class="title">collapse_space</span> = <span class="params">(value)</span> -&gt;</span>
  value.replace <span class="regexp">/\s+/g</span>, <span class="string">' '</span></div></div></div><div class="segment"><div class="comments doc-section doc-section-public"><div class="wrapper"><p><span class='doc-section-header'>Public module DOC<em>TAGS of type _Object</em></span></p>

<p>This is a sample doc tagged block comment</p></div></div><div class="code"><div class="wrapper">module.<span class="built_in">exports</span> = DOC_TAGS =
  <span class="attribute">description</span>:
    <span class="attribute">section</span>:     <span class="string">'description'</span>
    <span class="attribute">markdown</span>:    <span class="string">'{value}'</span>

  <span class="attribute">internal</span>:
    <span class="attribute">section</span>:     <span class="string">'access'</span>
  <span class="string">'private'</span>:
    <span class="attribute">section</span>:     <span class="string">'access'</span>
  <span class="string">'protected'</span>:
    <span class="attribute">section</span>:     <span class="string">'access'</span>
  <span class="string">'public'</span>:
    <span class="attribute">valuePrefix</span>: <span class="string">'as'</span>
    <span class="attribute">section</span>:     <span class="string">'access'</span>
  <span class="string">'static'</span>:
    <span class="attribute">section</span>:     <span class="string">'access'</span>

  <span class="attribute">constructor</span>:
    <span class="attribute">section</span>:     <span class="string">'special'</span>
  <span class="attribute">destructor</span>:
    <span class="attribute">section</span>:     <span class="string">'special'</span>

  <span class="attribute">constant</span>:
    <span class="attribute">section</span>:     <span class="string">'type'</span>
  <span class="attribute">method</span>:
    <span class="attribute">section</span>:     <span class="string">'type'</span>
  <span class="attribute">module</span>:
    <span class="attribute">section</span>:     <span class="string">'type'</span>
  <span class="string">'package'</span>:
    <span class="attribute">section</span>:     <span class="string">'type'</span>
  <span class="attribute">property</span>:
    <span class="attribute">section</span>:     <span class="string">'type'</span>

  <span class="attribute">accessor</span>:
    <span class="attribute">section</span>:     <span class="string">'flag'</span>
    <span class="attribute">markdown</span>:    <span class="string">'is an accessor'</span>
  <span class="attribute">async</span>:
    <span class="attribute">section</span>:     <span class="string">'flag'</span>
    <span class="attribute">markdown</span>:    <span class="string">'is asynchronous'</span>
  <span class="attribute">asynchronous</span>:  <span class="string">'async'</span>
  <span class="attribute">getter</span>:
    <span class="attribute">section</span>:     <span class="string">'flag'</span>
    <span class="attribute">markdown</span>:    <span class="string">'is a getter'</span>
  <span class="attribute">recursive</span>:
    <span class="attribute">section</span>:     <span class="string">'flag'</span>
    <span class="attribute">markdown</span>:    <span class="string">'is recursive'</span>
  <span class="attribute">refactor</span>:
    <span class="attribute">section</span>:     <span class="string">'flag'</span>
    <span class="attribute">markdown</span>:    <span class="string">'needs to be refactored'</span>
  <span class="attribute">setter</span>:
    <span class="attribute">section</span>:     <span class="string">'flag'</span>
    <span class="attribute">markdown</span>:    <span class="string">'is a setter'</span>

  <span class="attribute">alias</span>:
    <span class="attribute">valuePrefix</span>: <span class="string">'as'</span>
    <span class="attribute">section</span>:     <span class="string">'metadata'</span>
    <span class="attribute">markdown</span>:    <span class="string">'is aliased as {value}'</span>
  <span class="attribute">publishes</span>:
    <span class="attribute">section</span>:     <span class="string">'metadata'</span>
  <span class="attribute">requests</span>:
    <span class="attribute">section</span>:     <span class="string">'metadata'</span>
    <span class="attribute">markdown</span>:    <span class="string">'makes an ajax request to {value}'</span>
  <span class="attribute">subscribes</span>:
    <span class="attribute">valuePrefix</span>: <span class="string">'to'</span>
    <span class="attribute">section</span>:     <span class="string">'metadata'</span>
    <span class="attribute">markdown</span>:    <span class="string">'subscribes to {value}'</span>
  <span class="attribute">type</span>:
    <span class="attribute">section</span>:     <span class="string">'metadata'</span>
    <span class="attribute">markdown</span>:    <span class="string">'of type _{value}_'</span>

  <span class="attribute">todo</span>:
    <span class="attribute">section</span>:     <span class="string">'todo'</span>
    <span class="attribute">markdown</span>:    <span class="string">'TODO: {value}'</span>

  <span class="attribute">example</span>:
    <span class="attribute">section</span>:     <span class="string">'example'</span>
    <span class="attribute">markdown</span>:    <span class="string">'{value}'</span>
  <span class="attribute">examples</span>:      <span class="string">'example'</span>
  <span class="attribute">usage</span>:         <span class="string">'example'</span>

  <span class="attribute">howto</span>:
    <span class="attribute">section</span>:     <span class="string">'howto'</span>
    <span class="attribute">markdown</span>:    <span class="string">'{value}'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>A comment that does not have doc tags in it</p></div></div><div class="code"><div class="wrapper">  <span class="attribute">note</span>:
    <span class="attribute">section</span>:     <span class="string">'discard'</span>
  <span class="attribute">notes</span>:         <span class="string">'note'</span>

  <span class="attribute">param</span>:
    <span class="attribute">section</span>:     <span class="string">'params'</span></div></div></div><div class="segment"><div class="comments doc-section doc-section-public"><div class="wrapper"><p><span class='doc-section-header'>Public method parseValue</span></p>

<p>parses function parameters</p>

<p>Parameters:</p>

<ul>
<li><strong>value must be a String.</strong><br/>(Text that follows @param)</li>
</ul>

<p><strong>Returns an Object</strong></p></div></div><div class="code"><div class="wrapper">    <span class="attribute">parseValue</span>:  <span class="function"><span class="params">(value)</span> -&gt;</span>
      parts = collapse_space(value).match <span class="regexp">/^\{([^\}]+)\}\s+(\[?)([\w\.\$]+)(?:=([^\s\]]+))?(\]?)\s*(.*)$/</span>
      <span class="attribute">types</span>:        (parts[<span class="number">1</span>]?.split <span class="regexp">/\|{1,2}/g</span>)
      <span class="attribute">isOptional</span>:   (parts[<span class="number">2</span>] == <span class="string">'['</span> <span class="keyword">and</span> parts[<span class="number">5</span>] == <span class="string">']'</span>)
      <span class="attribute">varName</span>:      parts[<span class="number">3</span>]
      <span class="attribute">isSubParam</span>:   <span class="regexp">/\./</span>.test parts[<span class="number">3</span>]
      <span class="attribute">defaultValue</span>: parts[<span class="number">4</span>]
      <span class="attribute">description</span>:  parts[<span class="number">6</span>]</div></div></div><div class="segment"><div class="comments doc-section doc-section-private"><div class="wrapper"><p><span class='doc-section-header'>Private method markdown</span></p>

<p>converts parsed values to markdown text</p>

<p>Parameters:</p>

<ul>
<li><p><strong>value must be an Object.</strong></p>

<ul><li><p><strong>value.types must be an Array of Strings.</strong></p></li>
<li><p><strong>value.isOptional must be a Boolean and has a default value of false.</strong></p></li>
<li><p><strong>value.varName must be a String.</strong></p></li>
<li><p><strong>value.isSubParam must be a Boolean and has a default value of false.</strong></p></li>
<li><p><strong>value.defaultValue is optional and must be a String.</strong></p></li>
<li><p><strong>value.description is optional and must be a String.</strong></p></li></ul></li>
</ul>

<p><strong>Returns a String</strong><br/>(should be in markdown syntax)</p></div></div><div class="code"><div class="wrapper">    <span class="attribute">markdown</span>:    <span class="function"><span class="params">(value)</span> -&gt;</span>
      types = (
        <span class="keyword">for</span> type <span class="keyword">in</span> value.types
          <span class="keyword">if</span> type.match <span class="regexp">/^\.\.\.|\.\.\.$/</span>
            <span class="string">"any number of <span class="subst">#{humanize.pluralize type.replace(<span class="regexp">/^\.\.\.|\.\.\.$/</span>, <span class="string">""</span>)}</span>"</span>
          <span class="keyword">else</span> <span class="keyword">if</span> type.match <span class="regexp">/\[\]$/</span>
            <span class="string">"an Array of <span class="subst">#{humanize.pluralize type.replace(<span class="regexp">/\[\]$/</span>, <span class="string">""</span>)}</span>"</span>
          <span class="keyword">else</span>
            <span class="string">"<span class="subst">#{humanize.article type}</span> <span class="subst">#{type}</span>"</span>
      )

      fragments = []

      fragments.push <span class="string">'is optional'</span> <span class="keyword">if</span> value.isOptional
      verb = <span class="string">'must'</span>

      <span class="keyword">if</span> types.length &gt; <span class="number">1</span>
        verb = <span class="string">'can'</span>
      <span class="keyword">else</span> <span class="keyword">if</span> types[<span class="number">0</span>] == <span class="string">'a Mixed'</span>
        verb = <span class="string">'can'</span>
        types[<span class="number">0</span>] = <span class="string">'of any type'</span>
      <span class="keyword">else</span> <span class="keyword">if</span> types[<span class="number">0</span>] == <span class="string">'an Array of Mixeds'</span>
        verb = <span class="string">'can'</span>
        types[<span class="number">0</span>] = <span class="string">'an Array of any type'</span>
      <span class="keyword">else</span> <span class="keyword">if</span> types[<span class="number">0</span>] == <span class="string">'any number of Mixeds'</span>
        verb = <span class="string">'can'</span>
        types[<span class="number">0</span>] = <span class="string">'any number of arguments of any type'</span>

      fragments.push <span class="string">"<span class="subst">#{verb}</span> be <span class="subst">#{humanize.joinSentence types, <span class="string">'or'</span>}</span>"</span>
      fragments.push <span class="string">"has a default value of <span class="subst">#{value.defaultValue}</span>"</span> <span class="keyword">if</span> value.defaultValue?

      <span class="string">"<span class="subst">#{<span class="keyword">if</span> value.isSubParam <span class="keyword">then</span> <span class="string">"    *"</span> <span class="keyword">else</span> <span class="string">"*"</span>}</span> **<span class="subst">#{value.varName}</span> <span class="subst">#{humanize.joinSentence fragments}</span>.**<span class="subst">#{<span class="keyword">if</span> value.description.length <span class="keyword">then</span> <span class="string">'&lt;br/&gt;('</span> <span class="keyword">else</span> <span class="string">''</span>}</span><span class="subst">#{value.description}</span><span class="subst">#{<span class="keyword">if</span> value.description.length <span class="keyword">then</span> <span class="string">')'</span> <span class="keyword">else</span> <span class="string">''</span>}</span>"</span>
  <span class="attribute">params</span>:        <span class="string">'param'</span>
  <span class="attribute">parameters</span>:    <span class="string">'param'</span>

  <span class="string">'return'</span>:
    <span class="attribute">section</span>:     <span class="string">'returns'</span>
    <span class="attribute">parseValue</span>:  <span class="function"><span class="params">(value)</span> -&gt;</span>
      parts = collapse_space(value).match <span class="regexp">/^\{([^\}]+)\}\s*(.*)$/</span>
      <span class="attribute">types</span>:       parts[<span class="number">1</span>].split <span class="regexp">/\|{1,2}/g</span>
      <span class="attribute">description</span>: parts[<span class="number">2</span>]
    <span class="attribute">markdown</span>:     <span class="function"><span class="params">(value)</span> -&gt;</span>
      types = (<span class="string">"<span class="subst">#{humanize.article type}</span> <span class="subst">#{type}</span>"</span> <span class="keyword">for</span> type <span class="keyword">in</span> value.types)
      <span class="string">"**returns <span class="subst">#{types.join <span class="string">' or '</span>}</span>**<span class="subst">#{<span class="keyword">if</span> value.description.length <span class="keyword">then</span> <span class="string">'&lt;br/&gt;('</span> <span class="keyword">else</span> <span class="string">''</span>}</span><span class="subst">#{value.description}</span><span class="subst">#{<span class="keyword">if</span> value.description.length <span class="keyword">then</span> <span class="string">')'</span> <span class="keyword">else</span> <span class="string">''</span>}</span>"</span>
  <span class="attribute">returns</span>:       <span class="string">'return'</span>
  <span class="attribute">throw</span>:
    <span class="attribute">section</span>:     <span class="string">'returns'</span>
    <span class="attribute">parseValue</span>:  <span class="function"><span class="params">(value)</span> -&gt;</span>
      parts = collapse_space(value).match <span class="regexp">/^\{([^\}]+)\}\s*(.*)$/</span>
      <span class="attribute">types</span>:       parts[<span class="number">1</span>].split <span class="regexp">/\|{1,2}/g</span>
      <span class="attribute">description</span>: parts[<span class="number">2</span>]
    <span class="attribute">markdown</span>:    <span class="function"><span class="params">(value)</span> -&gt;</span>
      types = (<span class="string">"<span class="subst">#{humanize.article type}</span> <span class="subst">#{type}</span>"</span> <span class="keyword">for</span> type <span class="keyword">in</span> value.types)
      <span class="string">"**can throw <span class="subst">#{types.join <span class="string">' or '</span>}</span>**<span class="subst">#{<span class="keyword">if</span> value.description.length <span class="keyword">then</span> <span class="string">'&lt;br/&gt;('</span> <span class="keyword">else</span> <span class="string">''</span>}</span><span class="subst">#{value.description}</span><span class="subst">#{<span class="keyword">if</span> value.description.length <span class="keyword">then</span> <span class="string">')'</span> <span class="keyword">else</span> <span class="string">''</span>}</span>"</span>
  <span class="attribute">throws</span>:        <span class="string">'throw'</span>

  <span class="attribute">defaultNoValue</span>:
    <span class="attribute">section</span>:     <span class="string">'flag'</span>
  <span class="attribute">defaultHasValue</span>:
    <span class="attribute">section</span>:     <span class="string">'metadata'</span></div></div></div></div></body></html>